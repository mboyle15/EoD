function loadContent(n){$.get("/Main/LoadContent",{name:n},function(t){if($("#main").html(t),n!=="Home"){try{chartProperties=JSON.parse($("#chartProperties").attr("data-chart-prop"))}catch(i){chartProperties={chartType:"line",datasetLabel:"Default Dataset - error with Parse",backgroundColor:"rgba(255,0,0,1)",borderColor:"rgba(255,0,0,1)",labelString:"Default",xAxis:[],yAxis:[],globalChart:null}}setupBtnsSensorData();setupBtnsSensorScale();setupBtnsSensorScroll();updateChart()}else startUserTimer()},"html")}function setupSlideShow(){$("#ss-full-slider").attr("data-current-slot",0);$("#ss-scroll-left button").click(function(){moveToNextSlide(-1);startUserTimer()});$("#ss-scroll-right button").click(function(){moveToNextSlide(1);startUserTimer()});$("#ss-full").on("click","img",function(){toggleSlideShow();startUserTimer()});$("#ss-nav-slider").on("click","div",function(){$("#ss-full, #ss-scroll div").removeClass("ss-scroll-down");$("#ss-full-slider").attr("data-current-slot",$(this).index());startUserTimer();updateSlideshow()});$("#ss-nav-slot-select").click(function(){toggleSlideShow();startUserTimer()})}function moveToNextSlide(n){var t=$("#ss-full-slider"),i=parseInt(t.attr("data-current-slot"))+n,r=$("#ss-full-slider div").length;i<0?t.attr("data-current-slot",r-1):i>=r?t.attr("data-current-slot",0):t.attr("data-current-slot",i);updateSlideshow()}function startSlideShowTimer(){timers.user!==null&&(clearTimeout(timers.user),timers.user=null);activateSlideShow();timers.slideShow=setTimeout(function(){moveToNextSlide(1);startSlideShowTimer()},5e3)}function startUserTimer(){timers.slideShow!==null&&(clearTimeout(timers.slideShow),timers.slideShow=null);timers.user!==null&&clearTimeout(timers.user);timers.user=setTimeout(function(){startSlideShowTimer()},1e4)}function updateSlideshow(){var n=$("#ss-full-slider");n.css("margin-left",n.attr("data-current-slot")*-1600);$("#ss-nav-slider").css("margin-left",n.attr("data-current-slot")*-200+700)}function activateSlideShow(){$("#ss-full, #ss-scroll div").removeClass("ss-scroll-down")}function deactivateSlideShow(){$("#ss-full, #ss-scroll div").addClass("ss-scroll-down")}function toggleSlideShow(){$("#ss-full, #ss-scroll div").toggleClass("ss-scroll-down")}function setupBtnsSensorSelect(){$("#sidebar button.sensorNavBtn").click(function(){var n=$(this);n.hasClass("current")||(loadContent(n.attr("data-graph-sensor")),$("#sidebar button.current").removeClass("current"),n.addClass("current"))})}function setupBtnsSensorData(){$("#sensorDataBtns button").click(function(){var n=$(this);n.hasClass("current")||($("#sensorDataBtns button.current").removeClass("current"),n.addClass("current"));changeChartData("data-graph-data",n.attr("data-graph-data"))})}function setupBtnsSensorScale(){$("#chartScaleBtns button").click(function(){var n=$(this);n.hasClass("current")||($("#chartScaleBtns button.current").removeClass("current"),n.addClass("current"));changeChartData("data-graph-scale",n.attr("data-graph-scale"))})}function setupBtnsSensorScroll(){$("#chartScrollLeftBtn").click(function(){var n=$("#chartData"),t=0;switch(n.attr("data-graph-Scale")){case"All":t=moment(n.attr("data-graph-end")).subtract(1,"hour").format("YYYY-MM-DDThh:mm");break;case"Hour":t=moment(n.attr("data-graph-end")).subtract(1,"hour").format("YYYY-MM-DDThh:mm");break;case"Day":t=moment(n.attr("data-graph-end")).subtract(1,"day").format("YYYY-MM-DDThh:mm");break;case"Month":t=moment(n.attr("data-graph-end")).subtract(1,"month").format("YYYY-MM-DDThh:mm");break;case"Year":t=moment(n.attr("data-graph-end")).subtract(1,"year").format("YYYY-MM-DDThh:mm")}changeChartData("data-graph-end",t)});$("#chartScrollRightBtn").click(function(){var n=$("#chartData"),t=0;switch(n.attr("data-graph-Scale")){case"All":t=moment(n.attr("data-graph-end")).add(1,"hour").format("YYYY-MM-DDThh:mm");break;case"Hour":t=moment(n.attr("data-graph-end")).add(1,"hour").format("YYYY-MM-DDThh:mm");break;case"Day":t=moment(n.attr("data-graph-end")).add(1,"day").format("YYYY-MM-DDThh:mm");break;case"Month":t=moment(n.attr("data-graph-end")).add(1,"month").format("YYYY-MM-DDThh:mm");break;case"Year":t=moment(n.attr("data-graph-end")).add(1,"year").format("YYYY-MM-DDThh:mm")}changeChartData("data-graph-end",t)})}function updateTitleFromBtns(){}function updateTitleToLoadingChart(){}function changeChartData(n,t){var i=$("#chartData");i.attr(n)!==t&&(updateTitleToLoadingChart(),i.attr(n,t),updateChart(),updateTitleFromBtns())}function updateChart(){getChartPoints();startUserTimer();deactivateSlideShow()}function getChartPoints(){var n=$("#chartData");$.getJSON("/Main/GetGraphPoints",{end:n.attr("data-graph-end"),numTicks:n.attr("data-graph-ticks"),sensor:n.attr("data-graph-sensor"),dataType:n.attr("data-graph-data"),scale:n.attr("data-graph-scale")},function(n){chartProperties.xAxis=n.xAxis;chartProperties.yAxis=n.yAxis;drawChart()})}function getGraphPointsWithStats(){}function drawChart(){chartProperties.globalChart!==undefined&&chartProperties.globalChart!==null&&$("#graphContainer").html('<canvas id="sensorChartHere" ><\/canvas>');chartProperties.chartType=chartProperties.xAxis.length<15?"bar":"line";drawChartSingleData()}function drawChartSingleData(){var n=$("#sensorChartHere");chartProperties.globalChart=new Chart(n,{type:chartProperties.chartType,responsive:!1,maintainAspectRatio:!1,data:{labels:chartProperties.xAxis,datasets:[{label:chartProperties.datasetLabel,data:chartProperties.yAxis,lineTension:0,backgroundColor:chartProperties.backgroundColor,borderColor:chartProperties.borderColor,pointBorderColor:"rgba(0,0,0,1)",pointRadius:5}]},options:{scales:{yAxes:[{scaleLabel:{display:!0,labelString:chartProperties.labelString,fontStyle:"bold",fontSize:20},ticks:{fontStyle:"bold"}}],xAxes:[{ticks:{autoSkip:!0,maxTicksLimit:10,fontSize:16,fontStyle:"bold"},type:"time",display:!0,scaleLabel:{display:!0,labelString:"Date"},time:{displayFormats:{minute:"h:mmA",hour:"h:mmA",day:"MMM D",week:"MMM YYYY",month:"MMM YYYY",quarter:"YYYY",year:"YYYY"}}}]}}})}$("document").ready(function(){$("#main").text()===""&&(loadContent("Home"),setupBtnsSensorSelect());var n=$("#slideShow");n.text()===""&&$.get("/Main/LoadSlideShow",function(t){n.html(t);setupSlideShow()},"html").fail(function(){n.html("<h3>Slide Show Unavailble<\/h3> <p>Please check with administrator<\/p>")})});var chartProperties={},timers={slideShow:null,user:null};